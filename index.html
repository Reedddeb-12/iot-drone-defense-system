<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Defense IoT Surveillance Command Center</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #1a472a;
            --secondary-color: #2d5a3d;
            --accent-color: #00ff88;
            --warning-color: #ff4444;
            --info-color: #4488ff;
            --dark-bg: #0a0f0d;
            --darker-bg: #050807;
            --text-light: #e8f5e8;
            --text-muted: #a0c4a0;
            --border-color: #2d5a3d;
            --success-color: #00aa44;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--dark-bg) 0%, var(--darker-bg) 100%);
            color: var(--text-light);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Header */
        .header {
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            padding: 1rem 2rem;
            box-shadow: 0 4px 20px rgba(0, 255, 136, 0.3);
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 2px solid var(--accent-color);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent-color);
        }

        .logo i {
            font-size: 2rem;
            animation: pulse 2s infinite;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid var(--accent-color);
            border-radius: 25px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--accent-color);
            animation: blink 1.5s infinite;
        }

        /* Main Layout */
        .main-container {
            display: grid;
            grid-template-columns: 280px 1fr;
            min-height: calc(100vh - 80px);
        }

        .sidebar {
            background: linear-gradient(180deg, var(--primary-color), var(--darker-bg));
            border-right: 2px solid var(--border-color);
            padding: 2rem 0;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin: 5px 0;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 25px;
            color: var(--text-muted);
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .nav-link:hover, .nav-link.active {
            color: var(--accent-color);
            background: rgba(0, 255, 136, 0.1);
            border-left-color: var(--accent-color);
        }

        .nav-link i {
            width: 20px;
            text-align: center;
        }

        /* Content Area */
        .content {
            padding: 2rem;
            overflow-y: auto;
        }

        .page-content {
            display: none;
            max-width: 1200px;
            margin: 0 auto;
        }

        .page-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        /* Dashboard Cards */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .card {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border: 1px solid var(--border-color);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-color), var(--info-color));
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 255, 136, 0.2);
        }

        .card-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--accent-color);
        }

        .card-icon {
            font-size: 2rem;
            opacity: 0.7;
        }

        .metric-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--text-light);
            margin: 15px 0;
        }

        .metric-label {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* Live Feed */
        .live-feed {
            background: var(--darker-bg);
            border: 2px solid var(--border-color);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .feed-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
        }

        .camera-feed {
            position: relative;
            background: #000;
            border-radius: 10px;
            overflow: hidden;
            aspect-ratio: 16/9;
        }

        .camera-feed img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .camera-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0.5) 0%, transparent 30%, transparent 70%, rgba(0,0,0,0.5) 100%);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 15px;
        }

        .camera-info {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .camera-label {
            background: rgba(0, 255, 136, 0.9);
            color: #000;
            padding: 5px 12px;
            border-radius: 15px;
            font-weight: 600;
            font-size: 0.8rem;
        }

        .camera-status {
            display: flex;
            align-items: center;
            gap: 5px;
            background: rgba(0, 0, 0, 0.7);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
        }

        .status-online { color: var(--success-color); }
        .status-offline { color: var(--warning-color); }

        .camera-controls {
            display: flex;
            gap: 10px;
        }

        .control-btn {
            background: rgba(26, 71, 42, 0.8);
            border: 1px solid var(--accent-color);
            color: var(--accent-color);
            padding: 8px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .control-btn:hover {
            background: var(--accent-color);
            color: #000;
        }

        /* Map */
        #surveillance-map {
            height: 500px;
            border-radius: 15px;
            border: 2px solid var(--border-color);
        }

        /* Alerts */
        .alerts-container {
            max-height: 400px;
            overflow-y: auto;
        }

        .alert-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            margin-bottom: 10px;
            background: rgba(255, 68, 68, 0.1);
            border: 1px solid var(--warning-color);
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .alert-item:hover {
            background: rgba(255, 68, 68, 0.2);
        }

        .alert-icon {
            font-size: 1.5rem;
            color: var(--warning-color);
        }

        .alert-content {
            flex: 1;
        }

        .alert-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .alert-time {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .alert-severity {
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .severity-high {
            background: var(--warning-color);
            color: white;
        }

        .severity-medium {
            background: #ff8800;
            color: white;
        }

        .severity-low {
            background: var(--info-color);
            color: white;
        }

        /* System Status */
        .system-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .system-card {
            background: var(--primary-color);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .system-status {
            width: 80px;
            height: 80px;
            margin: 0 auto 15px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            border: 3px solid;
        }

        .system-online {
            background: rgba(0, 170, 68, 0.2);
            border-color: var(--success-color);
            color: var(--success-color);
        }

        .system-offline {
            background: rgba(255, 68, 68, 0.2);
            border-color: var(--warning-color);
            color: var(--warning-color);
        }

        .system-maintenance {
            background: rgba(255, 136, 0, 0.2);
            border-color: #ff8800;
            color: #ff8800;
        }

        .battery-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .battery-bar {
            flex: 1;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
        }

        .battery-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--warning-color), var(--success-color));
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        /* Settings */
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
        }

        .setting-group {
            background: var(--primary-color);
            border: 1px solid var(--border-color);
            border-radius: 15px;
            padding: 25px;
        }

        .setting-group h3 {
            color: var(--accent-color);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-light);
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            background: var(--darker-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-light);
            font-size: 1rem;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px rgba(0, 255, 136, 0.2);
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background: var(--darker-bg);
            border-radius: 15px;
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-switch.active {
            background: var(--success-color);
        }

        .toggle-slider {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 22px;
            height: 22px;
            background: var(--text-light);
            border-radius: 50%;
            transition: transform 0.3s ease;
        }

        .toggle-switch.active .toggle-slider {
            transform: translateX(28px);
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--accent-color), var(--success-color));
            color: #000;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 255, 136, 0.3);
        }

        .btn-secondary {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-light);
        }

        .btn-secondary:hover {
            background: var(--border-color);
        }

        .btn-danger {
            background: var(--warning-color);
            color: white;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: fixed;
                left: -280px;
                top: 80px;
                height: calc(100vh - 80px);
                z-index: 999;
                transition: left 0.3s ease;
            }
            
            .sidebar.open {
                left: 0;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .feed-grid {
                grid-template-columns: 1fr;
            }
            
            .system-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .settings-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--darker-bg);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-color);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-shield-alt"></i>
                <span>Defense Surveillance Command</span>
            </div>
            <div class="user-info">
                <div class="status-indicator">
                    <div class="status-dot"></div>
                    <span>System Online</span>
                </div>
                <button class="btn btn-secondary" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    Logout
                </button>
            </div>
        </div>
    </header>

    <div class="main-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <nav class="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link active" onclick="showPage('dashboard')">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showPage('live-feeds')">
                        <i class="fas fa-video"></i>
                        <span>Live Feeds</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showPage('map-view')">
                        <i class="fas fa-map-marked-alt"></i>
                        <span>Map View</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showPage('alerts')">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>Alerts & Events</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showPage('analytics')">
                        <i class="fas fa-chart-line"></i>
                        <span>Analytics</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showPage('system-status')">
                        <i class="fas fa-server"></i>
                        <span>System Status</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showPage('settings')">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </a>
                </li>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="content">
            <!-- Dashboard Page -->
            <div id="dashboard" class="page-content active">
                <h1 style="margin-bottom: 30px; color: var(--accent-color);">
                    <i class="fas fa-shield-alt"></i> Command Center Dashboard
                </h1>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Active Units</div>
                                <div class="metric-value">24</div>
                                <div class="metric-label">of 28 deployed</div>
                            </div>
                            <i class="fas fa-video card-icon" style="color: var(--success-color);"></i>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Alerts Today</div>
                                <div class="metric-value">7</div>
                                <div class="metric-label">3 high priority</div>
                            </div>
                            <i class="fas fa-exclamation-triangle card-icon" style="color: var(--warning-color);"></i>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">System Health</div>
                                <div class="metric-value">98%</div>
                                <div class="metric-label">operational status</div>
                            </div>
                            <i class="fas fa-heartbeat card-icon" style="color: var(--accent-color);"></i>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Data Encrypted</div>
                                <div class="metric-value">2.4TB</div>
                                <div class="metric-label">today's transmission</div>
                            </div>
                            <i class="fas fa-lock card-icon" style="color: var(--info-color);"></i>
                        </div>
                    </div>
                </div>

                <div class="live-feed">
                    <h2 style="margin-bottom: 20px; color: var(--accent-color);">
                        <i class="fas fa-broadcast-tower"></i> Recent Activity Feed
                    </h2>
                    <div class="feed-grid">
                        <div class="camera-feed">
                            <img src="https://via.placeholder.com/640x360/1a472a/00ff88?text=SECTOR+A-1+LIVE" alt="Camera Feed">
                            <div class="camera-overlay">
                                <div class="camera-info">
                                    <div class="camera-label">SECTOR A-1</div>
                                    <div class="camera-status status-online">
                                        <i class="fas fa-circle"></i> LIVE
                                    </div>
                                </div>
                                <div class="camera-controls">
                                    <button class="control-btn" onclick="recordFeed('A1')">
                                        <i class="fas fa-record-vinyl"></i>
                                    </button>
                                    <button class="control-btn" onclick="fullscreen('A1')">
                                        <i class="fas fa-expand"></i>
                                    </button>
                                    <button class="control-btn" onclick="downloadFeed('A1')">
                                        <i class="fas fa-download"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="camera-feed">
                            <img src="https://via.placeholder.com/640x360/2d5a3d/00ff88?text=PERIMETER+B-3+LIVE" alt="Camera Feed">
                            <div class="camera-overlay">
                                <div class="camera-info">
                                    <div class="camera-label">PERIMETER B-3</div>
                                    <div class="camera-status status-online">
                                        <i class="fas fa-circle"></i> LIVE
                                    </div>
                                </div>
                                <div class="camera-controls">
                                    <button class="control-btn" onclick="recordFeed('B3')">
                                        <i class="fas fa-record-vinyl"></i>
                                    </button>
                                    <button class="control-btn" onclick="fullscreen('B3')">
                                        <i class="fas fa-expand"></i>
                                    </button>
                                    <button class="control-btn" onclick="downloadFeed('B3')">
                                        <i class="fas fa-download"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3 style="margin-bottom: 20px; color: var(--accent-color);">
                        <i class="fas fa-bell"></i> Recent Alerts
                    </h3>
                    <div class="alerts-container">
                        <div class="alert-item">
                            <i class="fas fa-exclamation-triangle alert-icon"></i>
                            <div class="alert-content">
                                <div class="alert-title">Motion detected in restricted zone</div>
                                <div class="alert-time">Sector A-1 • 2 minutes ago</div>
                            </div>
                            <div class="alert-severity severity-high">HIGH</div>
                        </div>
                        <div class="alert-item">
                            <i class="fas fa-battery-quarter alert-icon" style="color: var(--warning-color);"></i>
                            <div class="alert-content">
                                <div class="alert-title">Low battery warning</div>
                                <div class="alert-time">Unit B-3 • 15 minutes ago</div>
                            </div>
                            <div class="alert-severity severity-medium">MEDIUM</div>
                        </div>
                        <div class="alert-item">
                            <i class="fas fa-wifi alert-icon" style="color: var(--info-color);"></i>
                            <div class="alert-content">
                                <div class="alert-title">Network connectivity restored</div>
                                <div class="alert-time">Unit C-2 • 1 hour ago</div>
                            </div>
                            <div class="alert-severity severity-low">INFO</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Live Feeds Page -->
            <div id="live-feeds" class="page-content">
                <h1 style="margin-bottom: 30px; color: var(--accent-color);">
                    <i class="fas fa-video"></i> Live Camera Feeds
                </h1>

                <div class="feed-grid">
                    <div class="camera-feed">
                        <img src="https://via.placeholder.com/640x360/1a472a/00ff88?text=MAIN+ENTRANCE" alt="Main Entrance">
                        <div class="camera-overlay">
                            <div class="camera-info">
                                <div class="camera-label">MAIN ENTRANCE</div>
                                <div class="camera-status status-online">
                                    <i class="fas fa-circle"></i> LIVE
                                </div>
                            </div>
                            <div class="camera-controls">
                                <button class="control-btn">
                                    <i class="fas fa-record-vinyl"></i>
                                </button>
                                <button class="control-btn">
                                    <i class="fas fa-expand"></i>
                                </button>
                                <button class="control-btn">
                                    <i class="fas fa-download"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="camera-feed">
                        <img src="https://via.placeholder.com/640x360/2d5a3d/00ff88?text=NORTH+PERIMETER" alt="North Perimeter">
                        <div class="camera-overlay">
                            <div class="camera-info">
                                <div class="camera-label">NORTH PERIMETER</div>
                                <div class="camera-status status-online">
                                    <i class="fas fa-circle"></i> LIVE
                                </div>
                            </div>
                            <div class="camera-controls">
                                <button class="control-btn">
                                    <i class="fas fa-record-vinyl"></i>
                                </button>
                                <button class="control-btn">
                                    <i class="fas fa-expand"></i>
                                </button>
                                <button class="control-btn">
                                    <i class="fas fa-download"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="camera-feed">
                        <img src="https://via.placeholder.com/640x360/0a0f0d/ff4444?text=UNIT+OFFLINE" alt="Offline Unit">
                        <div class="camera-overlay">
                            <div class="camera-info">
                                <div class="camera-label">SOUTH GATE</div>
                                <div class="camera-status status-offline">
                                    <i class="fas fa-circle"></i> OFFLINE
                                </div>
                            </div>
                            <div class="camera-controls">
                                <button class="control-btn">
                                    <i class="fas fa-power-off"></i>
                                </button>
                                <button class="control-btn">
                                    <i class="fas fa-tools"></i>
                                </button>
                                <button class="control-btn">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="camera-feed">
                        <img src="https://via.placeholder.com/640x360/1a472a/00ff88?text=EAST+CHECKPOINT" alt="East Checkpoint">
                        <div class="camera-overlay">
                            <div class="camera-info">
                                <div class="camera-label">EAST CHECKPOINT</div>
                                <div class="camera-status status-online">
                                    <i class="fas fa-circle"></i> LIVE
                                </div>
                            </div>
                            <div class="camera-controls">
                                <button class="control-btn">
                                    <i class="fas fa-record-vinyl"></i>
                                </button>
                                <button class="control-btn">
                                    <i class="fas fa-expand"></i>
                                </button>
                                <button class="control-btn">
                                    <i class="fas fa-download"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="camera-feed">
                        <img src="https://via.placeholder.com/640x360/2d5a3d/00ff88?text=WEST+SECTOR" alt="West Sector">
                        <div class="camera-overlay">
                            <div class="camera-info">
                                <div class="camera-label">WEST SECTOR</div>
                                <div class="camera-status status-online">
                                    <i class="fas fa-circle"></i> LIVE
                                </div>
                            </div>
                            <div class="camera-controls">
                                <button class="control-btn">
                                    <i class="fas fa-record-vinyl"></i>
                                </button>
                                <button class="control-btn">
                                    <i class="fas fa-expand"></i>
                                </button>
                                <button class="control-btn">
                                    <i class="fas fa-download"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="camera-feed">
                        <img src="https://via.placeholder.com/640x360/1a472a/00ff88?text=COMMAND+CENTER" alt="Command Center">
                        <div class="camera-overlay">
                            <div class="camera-info">
                                <div class="camera-label">COMMAND CENTER</div>
                                <div class="camera-status status-online">
                                    <i class="fas fa-circle"></i> LIVE
                                </div>
                            </div>
                            <div class="camera-controls">
                                <button class="control-btn">
                                    <i class="fas fa-record-vinyl"></i>
                                </button>
                                <button class="control-btn">
                                    <i class="fas fa-expand"></i>
                                </button>
                                <button class="control-btn">
                                    <i class="fas fa-download"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 30px;">
                    <div class="card-header">
                        <div class="card-title">Feed Controls</div>
                    </div>
                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                        <button class="btn btn-primary" onclick="startRecordingAll()">
                            <i class="fas fa-record-vinyl"></i>
                            Record All Feeds
                        </button>
                        <button class="btn btn-secondary" onclick="takeSnapshots()">
                            <i class="fas fa-camera"></i>
                            Snapshot All
                        </button>
                        <button class="btn btn-secondary" onclick="toggleNightVision()">
                            <i class="fas fa-moon"></i>
                            Night Vision Mode
                        </button>
                        <button class="btn btn-danger" onclick="emergencyAlert()">
                            <i class="fas fa-exclamation-triangle"></i>
                            Emergency Alert
                        </button>
                    </div>
                </div>
            </div>

            <!-- Map View Page -->
            <div id="map-view" class="page-content">
                <h1 style="margin-bottom: 30px; color: var(--accent-color);">
                    <i class="fas fa-map-marked-alt"></i> Tactical Map View
                </h1>
                
                <div class="card">
                    <div id="surveillance-map"></div>
                </div>

                <div class="dashboard-grid" style="margin-top: 30px;">
                    <div class="card">
                        <div class="card-title">Zone Coverage</div>
                        <div class="metric-value">87%</div>
                        <div class="metric-label">of perimeter monitored</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-title">Active Sensors</div>
                        <div class="metric-value">24</div>
                        <div class="metric-label">PIR motion detectors</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-title">Network Strength</div>
                        <div class="metric-value">4G+</div>
                        <div class="metric-label">average signal quality</div>
                    </div>
                </div>
            </div>

            <!-- Alerts Page -->
            <div id="alerts" class="page-content">
                <h1 style="margin-bottom: 30px; color: var(--accent-color);">
                    <i class="fas fa-exclamation-triangle"></i> Alerts & Security Events
                </h1>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-title">Critical Alerts</div>
                        <div class="metric-value">3</div>
                        <div class="metric-label">require immediate attention</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-title">Motion Events</div>
                        <div class="metric-value">47</div>
                        <div class="metric-label">detected today</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-title">System Warnings</div>
                        <div class="metric-value">2</div>
                        <div class="metric-label">maintenance required</div>
                    </div>
                </div>

                <div class="card" style="margin-top: 30px;">
                    <div class="card-header">
                        <div class="card-title">Alert History</div>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn btn-secondary" onclick="filterAlerts('all')">All</button>
                            <button class="btn btn-secondary" onclick="filterAlerts('high')">High Priority</button>
                            <button class="btn btn-secondary" onclick="filterAlerts('today')">Today</button>
                        </div>
                    </div>
                    
                    <div class="alerts-container" id="all-alerts">
                        <div class="alert-item">
                            <i class="fas fa-user-secret alert-icon"></i>
                            <div class="alert-content">
                                <div class="alert-title">Unauthorized personnel detected</div>
                                <div class="alert-time">Sector A-1 • 12:35 PM • Face recognition: Unknown</div>
                            </div>
                            <div class="alert-severity severity-high">CRITICAL</div>
                        </div>
                        
                        <div class="alert-item">
                            <i class="fas fa-running alert-icon"></i>
                            <div class="alert-content">
                                <div class="alert-title">Rapid movement detected</div>
                                <div class="alert-time">Perimeter B-3 • 11:42 AM • Speed: 15 km/h</div>
                            </div>
                            <div class="alert-severity severity-high">HIGH</div>
                        </div>
                        
                        <div class="alert-item">
                            <i class="fas fa-wifi alert-icon" style="color: var(--warning-color);"></i>
                            <div class="alert-content">
                                <div class="alert-title">Communication disruption</div>
                                <div class="alert-time">Unit C-2 • 10:15 AM • Duration: 3 minutes</div>
                            </div>
                            <div class="alert-severity severity-medium">MEDIUM</div>
                        </div>
                        
                        <div class="alert-item">
                            <i class="fas fa-battery-quarter alert-icon" style="color: var(--warning-color);"></i>
                            <div class="alert-content">
                                <div class="alert-title">Low battery warning</div>
                                <div class="alert-time">Multiple units • 09:30 AM • Battery level: <25%</div>
                            </div>
                            <div class="alert-severity severity-medium">MEDIUM</div>
                        </div>
                        
                        <div class="alert-item">
                            <i class="fas fa-sun alert-icon" style="color: var(--accent-color);"></i>
                            <div class="alert-content">
                                <div class="alert-title">Solar charging optimal</div>
                                <div class="alert-time">All units • 08:00 AM • Peak efficiency reached</div>
                            </div>
                            <div class="alert-severity severity-low">INFO</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Page -->
            <div id="analytics" class="page-content">
                <h1 style="margin-bottom: 30px; color: var(--accent-color);">
                    <i class="fas fa-chart-line"></i> System Analytics
                </h1>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-title">Detection Accuracy</div>
                        <div class="metric-value">94.7%</div>
                        <div class="metric-label">motion detection rate</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-title">False Positives</div>
                        <div class="metric-value">5.3%</div>
                        <div class="metric-label">environmental triggers</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-title">Encryption Status</div>
                        <div class="metric-value">100%</div>
                        <div class="metric-label">data secured with AES-256</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-title">Uptime</div>
                        <div class="metric-value">99.8%</div>
                        <div class="metric-label">system availability</div>
                    </div>
                </div>

                <div class="card" style="margin-top: 30px;">
                    <div class="card-title">Performance Metrics</div>
                    <canvas id="analyticsChart" width="800" height="400"></canvas>
                </div>

                <div class="dashboard-grid" style="margin-top: 30px;">
                    <div class="card">
                        <div class="card-title">Energy Efficiency</div>
                        <div style="margin: 20px 0;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span>Solar Generation</span>
                                <span>87%</span>
                            </div>
                            <div class="battery-bar">
                                <div class="battery-fill" style="width: 87%;"></div>
                            </div>
                        </div>
                        <div style="margin: 20px 0;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span>Power Consumption</span>
                                <span>23%</span>
                            </div>
                            <div class="battery-bar">
                                <div class="battery-fill" style="width: 23%; background: var(--info-color);"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-title">Data Transmission</div>
                        <div style="margin: 20px 0;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span>Encrypted Data</span>
                                <span>2.4 TB</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span>Transmission Success</span>
                                <span>99.9%</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span>Average Latency</span>
                                <span>45ms</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- System Status Page -->
            <div id="system-status" class="page-content">
                <h1 style="margin-bottom: 30px; color: var(--accent-color);">
                    <i class="fas fa-server"></i> System Status Monitor
                </h1>

                <div class="system-grid">
                    <div class="system-card">
                        <div class="system-status system-online">
                            <i class="fas fa-video"></i>
                        </div>
                        <h3>Unit A-1</h3>
                        <p>Main Entrance</p>
                        <div class="battery-indicator">
                            <i class="fas fa-battery-three-quarters"></i>
                            <div class="battery-bar">
                                <div class="battery-fill" style="width: 78%;"></div>
                            </div>
                            <span>78%</span>
                        </div>
                    </div>

                    <div class="system-card">
                        <div class="system-status system-online">
                            <i class="fas fa-video"></i>
                        </div>
                        <h3>Unit B-3</h3>
                        <p>North Perimeter</p>
                        <div class="battery-indicator">
                            <i class="fas fa-battery-full"></i>
                            <div class="battery-bar">
                                <div class="battery-fill" style="width: 92%;"></div>
                            </div>
                            <span>92%</span>
                        </div>
                    </div>

                    <div class="system-card">
                        <div class="system-status system-offline">
                            <i class="fas fa-video-slash"></i>
                        </div>
                        <h3>Unit C-2</h3>
                        <p>South Gate</p>
                        <div class="battery-indicator">
                            <i class="fas fa-battery-empty"></i>
                            <div class="battery-bar">
                                <div class="battery-fill" style="width: 0%;"></div>
                            </div>
                            <span>0%</span>
                        </div>
                    </div>

                    <div class="system-card">
                        <div class="system-status system-maintenance">
                            <i class="fas fa-tools"></i>
                        </div>
                        <h3>Unit D-4</h3>
                        <p>East Checkpoint</p>
                        <div class="battery-indicator">
                            <i class="fas fa-battery-half"></i>
                            <div class="battery-bar">
                                <div class="battery-fill" style="width: 45%;"></div>
                            </div>
                            <span>45%</span>
                        </div>
                    </div>

                    <div class="system-card">
                        <div class="system-status system-online">
                            <i class="fas fa-video"></i>
                        </div>
                        <h3>Unit E-5</h3>
                        <p>West Sector</p>
                        <div class="battery-indicator">
                            <i class="fas fa-battery-three-quarters"></i>
                            <div class="battery-bar">
                                <div class="battery-fill" style="width: 67%;"></div>
                            </div>
                            <span>67%</span>
                        </div>
                    </div>

                    <div class="system-card">
                        <div class="system-status system-online">
                            <i class="fas fa-video"></i>
                        </div>
                        <h3>Unit F-6</h3>
                        <p>Command Center</p>
                        <div class="battery-indicator">
                            <i class="fas fa-battery-full"></i>
                            <div class="battery-bar">
                                <div class="battery-fill" style="width: 89%;"></div>
                            </div>
                            <span>89%</span>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 30px;">
                    <div class="card-title">System Actions</div>
                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                        <button class="btn btn-primary" onclick="restartAllUnits()">
                            <i class="fas fa-sync"></i>
                            Restart All Units
                        </button>
                        <button class="btn btn-secondary" onclick="runDiagnostics()">
                            <i class="fas fa-stethoscope"></i>
                            Run Diagnostics
                        </button>
                        <button class="btn btn-secondary" onclick="updateFirmware()">
                            <i class="fas fa-download"></i>
                            Update Firmware
                        </button>
                        <button class="btn btn-danger" onclick="emergencyShutdown()">
                            <i class="fas fa-power-off"></i>
                            Emergency Shutdown
                        </button>
                    </div>
                </div>
            </div>

            <!-- Settings Page -->
            <div id="settings" class="page-content">
                <h1 style="margin-bottom: 30px; color: var(--accent-color);">
                    <i class="fas fa-cog"></i> System Configuration
                </h1>

                <div class="settings-grid">
                    <div class="setting-group">
                        <h3><i class="fas fa-shield-alt"></i> Security Settings</h3>
                        
                        <div class="form-group">
                            <label>Encryption Algorithm</label>
                            <select class="form-control">
                                <option selected>AES-256-CBC</option>
                                <option>AES-128-GCM</option>
                                <option>ChaCha20-Poly1305</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Key Rotation Interval</label>
                            <select class="form-control">
                                <option>Every 24 hours</option>
                                <option selected>Every 7 days</option>
                                <option>Every 30 days</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label style="display: flex; justify-content: space-between; align-items: center;">
                                Two-Factor Authentication
                                <div class="toggle-switch active" onclick="toggleSetting(this)">
                                    <div class="toggle-slider"></div>
                                </div>
                            </label>
                        </div>
                        
                        <div class="form-group">
                            <label style="display: flex; justify-content: space-between; align-items: center;">
                                SSL/TLS Verification
                                <div class="toggle-switch active" onclick="toggleSetting(this)">
                                    <div class="toggle-slider"></div>
                                </div>
                            </label>
                        </div>
                    </div>

                    <div class="setting-group">
                        <h3><i class="fas fa-bell"></i> Alert Configuration</h3>
                        
                        <div class="form-group">
                            <label>Motion Detection Sensitivity</label>
                            <input type="range" class="form-control" min="1" max="10" value="7">
                            <small style="color: var(--text-muted);">Current: High (7/10)</small>
                        </div>
                        
                        <div class="form-group">
                            <label>Alert Threshold (motion events/hour)</label>
                            <input type="number" class="form-control" value="5" min="1" max="100">
                        </div>
                        
                        <div class="form-group">
                            <label style="display: flex; justify-content: space-between; align-items: center;">
                                Email Notifications
                                <div class="toggle-switch active" onclick="toggleSetting(this)">
                                    <div class="toggle-slider"></div>
                                </div>
                            </label>
                        </div>
                        
                        <div class="form-group">
                            <label style="display: flex; justify-content: space-between; align-items: center;">
                                SMS Alerts (Critical Only)
                                <div class="toggle-switch active" onclick="toggleSetting(this)">
                                    <div class="toggle-slider"></div>
                                </div>
                            </label>
                        </div>
                    </div>

                    <div class="setting-group">
                        <h3><i class="fas fa-video"></i> Camera Settings</h3>
                        
                        <div class="form-group">
                            <label>Video Resolution</label>
                            <select class="form-control">
                                <option>720p (HD)</option>
                                <option selected>1080p (Full HD)</option>
                                <option>1440p (2K)</option>
                                <option>2160p (4K)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Frame Rate</label>
                            <select class="form-control">
                                <option>15 FPS</option>
                                <option selected>30 FPS</option>
                                <option>60 FPS</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label style="display: flex; justify-content: space-between; align-items: center;">
                                Night Vision Mode
                                <div class="toggle-switch active" onclick="toggleSetting(this)">
                                    <div class="toggle-slider"></div>
                                </div>
                            </label>
                        </div>
                        
                        <div class="form-group">
                            <label style="display: flex; justify-content: space-between; align-items: center;">
                                Auto-Recording on Motion
                                <div class="toggle-switch active" onclick="toggleSetting(this)">
                                    <div class="toggle-slider"></div>
                                </div>
                            </label>
                        </div>
                    </div>

                    <div class="setting-group">
                        <h3><i class="fas fa-solar-panel"></i> Power Management</h3>
                        
                        <div class="form-group">
                            <label>Power Saving Mode</label>
                            <select class="form-control">
                                <option>Disabled</option>
                                <option selected>Balanced</option>
                                <option>Maximum Efficiency</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Low Battery Threshold</label>
                            <input type="number" class="form-control" value="20" min="5" max="50">
                            <small style="color: var(--text-muted);">Alert when battery drops below this percentage</small>
                        </div>
                        
                        <div class="form-group">
                            <label style="display: flex; justify-content: space-between; align-items: center;">
                                Auto Sleep Mode
                                <div class="toggle-switch active" onclick="toggleSetting(this)">
                                    <div class="toggle-slider"></div>
                                </div>
                            </label>
                        </div>
                        
                        <div class="form-group">
                            <label>Sleep Schedule</label>
                            <input type="time" class="form-control" value="00:00">
                            <small style="color: var(--text-muted);">Daily sleep time (reduces power consumption)</small>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 30px;">
                    <div style="display: flex; gap: 15px; justify-content: flex-end;">
                        <button class="btn btn-secondary" onclick="resetSettings()">
                            <i class="fas fa-undo"></i>
                            Reset to Defaults
                        </button>
                        <button class="btn btn-primary" onclick="saveSettings()">
                            <i class="fas fa-save"></i>
                            Save Configuration
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Load external libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>

    <script>
        // Global variables
        let surveillanceMap;
        let analyticsChart;

        // Initialize application
        document.addEventListener('DOMContentLoaded', function() {
            initializeMap();
            initializeAnalytics();
            startRealTimeUpdates();
            checkSystemStatus();
        });

        // Navigation functions
        function showPage(pageId) {
            // Hide all pages
            const pages = document.querySelectorAll('.page-content');
            const navLinks = document.querySelectorAll('.nav-link');
            
            pages.forEach(page => page.classList.remove('active'));
            navLinks.forEach(link => link.classList.remove('active'));
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            event.target.classList.add('active');
            
            // Page-specific initializations
            if (pageId === 'map-view' && surveillanceMap) {
                setTimeout(() => {
                    surveillanceMap.invalidateSize();
                    updateMapMarkers();
                }, 100);
            }
        }

        // Initialize tactical map
        function initializeMap() {
            surveillanceMap = L.map('surveillance-map').setView([28.6139, 77.2090], 15); // New Delhi coordinates
            
            // Dark military-style tiles
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© OpenStreetMap contributors',
                className: 'map-tiles'
            }).addTo(surveillanceMap);
            
            // Add surveillance unit markers
            const surveillanceUnits = [
                { id: 'A1', name: 'Main Entrance', coords: [28.6139, 77.2090], status: 'online', battery: 78 },
                { id: 'B3', name: 'North Perimeter', coords: [28.6149, 77.2100], status: 'online', battery: 92 },
                { id: 'C2', name: 'South Gate', coords: [28.6129, 77.2080], status: 'offline', battery: 0 },
                { id: 'D4', name: 'East Checkpoint', coords: [28.6139, 77.2110], status: 'maintenance', battery: 45 },
                { id: 'E5', name: 'West Sector', coords: [28.6139, 77.2070], status: 'online', battery: 67 },
                { id: 'F6', name: 'Command Center', coords: [28.6145, 77.2095], status: 'online', battery: 89 }
            ];
            
            surveillanceUnits.forEach(unit => {
                const iconColor = unit.status === 'online' ? '#00ff88' : 
                                 unit.status === 'offline' ? '#ff4444' : '#ff8800';
                
                const marker = L.marker(unit.coords).addTo(surveillanceMap);
                marker.bindPopup(`
                    <div style="color: #000; font-weight: bold;">
                        <h4>${unit.name}</h4>
                        <p><strong>Unit ID:</strong> ${unit.id}</p>
                        <p><strong>Status:</strong> <span style="color: ${iconColor};">${unit.status.toUpperCase()}</span></p>
                        <p><strong>Battery:</strong> ${unit.battery}%</p>
                        <p><strong>Last Update:</strong> ${new Date().toLocaleTimeString()}</p>
                    </div>
                `);
            });
        }

        // Initialize analytics chart
        function initializeAnalytics() {
            const ctx = document.getElementById('analyticsChart');
            if (!ctx) return;
            
            analyticsChart = new Chart(ctx.getContext('2d'), {
                type: 'line',
                data: {
                    labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00'],
                    datasets: [{
                        label: 'Motion Events',
                        data: [2, 1, 15, 8, 12, 5],
                        borderColor: '#00ff88',
                        backgroundColor: 'rgba(0, 255, 136, 0.1)',
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'System Alerts',
                        data: [0, 0, 3, 1, 2, 1],
                        borderColor: '#ff4444',
                        backgroundColor: 'rgba(255, 68, 68, 0.1)',
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'Battery Average',
                        data: [65, 63, 70, 75, 80, 78],
                        borderColor: '#4488ff',
                        backgroundColor: 'rgba(68, 136, 255, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '24-Hour System Performance',
                            color: '#e8f5e8'
                        },
                        legend: {
                            labels: {
                                color: '#e8f5e8'
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#a0c4a0'
                            }
                        },
                        y: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#a0c4a0'
                            }
                        }
                    }
                }
            });
        }

        // Real-time updates
        function startRealTimeUpdates() {
            setInterval(() => {
                updateSystemMetrics();
                updateAlerts();
                updateBatteryLevels();
            }, 5000); // Update every 5 seconds
        }

        function updateSystemMetrics() {
            // Simulate real-time data updates
            const activeUnits = document.querySelector('.metric-value');
            if (activeUnits) {
                const current = parseInt(activeUnits.textContent);
                const variation = Math.random() > 0.5 ? 1 : -1;
                const newValue = Math.max(20, Math.min(28, current + (Math.random() > 0.8 ? variation : 0)));
                activeUnits.textContent = newValue;
            }
        }

        function updateAlerts() {
            // Simulate new alerts occasionally
            if (Math.random() > 0.95) {
                addNewAlert();
            }
        }

        function updateBatteryLevels() {
            const batteryFills = document.querySelectorAll('.battery-fill');
            batteryFills.forEach(fill => {
                const currentWidth = parseInt(fill.style.width);
                if (currentWidth > 0) {
                    // Simulate battery drain/charge
                    const change = Math.random() > 0.7 ? (Math.random() > 0.5 ? 1 : -1) : 0;
                    const newWidth = Math.max(0, Math.min(100, currentWidth + change));
                    fill.style.width = newWidth + '%';
                    
                    const span = fill.parentElement.querySelector('span');
                    if (span) {
                        span.textContent = newWidth + '%';
                    }
                }
            });
        }

        function addNewAlert() {
            const alertsContainer = document.getElementById('all-alerts');
            const alertTypes = [
                { icon: 'fa-walking', title: 'Movement detected in secure zone', severity: 'high' },
                { icon: 'fa-wifi', title: 'Network connectivity issue', severity: 'medium' },
                { icon: 'fa-battery-quarter', title: 'Battery level warning', severity: 'medium' },
                { icon: 'fa-camera', title: 'Camera obstruction detected', severity: 'high' }
            ];
            
            const alert = alertTypes[Math.floor(Math.random() * alertTypes.length)];
            const time = new Date().toLocaleTimeString();
            
            const alertElement = document.createElement('div');
            alertElement.className = 'alert-item';
            alertElement.innerHTML = `
                <i class="fas ${alert.icon} alert-icon"></i>
                <div class="alert-content">
                    <div class="alert-title">${alert.title}</div>
                    <div class="alert-time">Unit ${String.fromCharCode(65 + Math.floor(Math.random() * 6))}-${Math.floor(Math.random() * 6) + 1} • ${time}</div>
                </div>
                <div class="alert-severity severity-${alert.severity}">${alert.severity.toUpperCase()}</div>
            `;
            
            alertsContainer.insertBefore(alertElement, alertsContainer.firstChild);
            
            // Remove oldest alerts if more than 10
            while (alertsContainer.children.length > 10) {
                alertsContainer.removeChild(alertsContainer.lastChild);
            }
        }

        function checkSystemStatus() {
            // Simulate system health checks
            setInterval(() => {
                const statusCards = document.querySelectorAll('.system-status');
                statusCards.forEach(status => {
                    if (status.classList.contains('system-offline') && Math.random() > 0.9) {
                        // Occasionally bring offline units back online
                        status.classList.remove('system-offline');
                        status.classList.add('system-online');
                        status.innerHTML = '<i class="fas fa-video"></i>';
                        
                        // Update battery
                        const batteryFill = status.parentElement.querySelector('.battery-fill');
                        batteryFill.style.width = '45%';
                        status.parentElement.querySelector('span').textContent = '45%';
                        
                        showNotification('Unit back online', 'success');
                    }
                });
            }, 30000); // Check every 30 seconds
        }

        // Camera control functions
        function recordFeed(unitId) {
            showNotification(`Recording started for Unit ${unitId}`, 'info');
            // Simulate recording indication
            event.target.style.color = '#ff4444';
            setTimeout(() => {
                event.target.style.color = '';
                showNotification(`Recording stopped for Unit ${unitId}`, 'info');
            }, 5000);
        }

        function fullscreen(unitId) {
            showNotification(`Fullscreen view for Unit ${unitId}`, 'info');
            // In a real implementation, this would open fullscreen video
        }

        function downloadFeed(unitId) {
            showNotification(`Downloading footage from Unit ${unitId}`, 'info');
            // Simulate download progress
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                if (progress >= 100) {
                    clearInterval(interval);
                    showNotification(`Download complete for Unit ${unitId}`, 'success');
                }
            }, 200);
        }

        function startRecordingAll() {
            showNotification('Recording started on all active units', 'success');
        }

        function takeSnapshots() {
            showNotification('Snapshots captured from all active cameras', 'success');
        }

        function toggleNightVision() {
            const isEnabled = event.target.classList.toggle('active');
            showNotification(`Night vision ${isEnabled ? 'enabled' : 'disabled'}`, 'info');
        }

        function emergencyAlert() {
            if (confirm('Activate emergency alert protocol?')) {
                showNotification('EMERGENCY ALERT ACTIVATED - All units notified', 'error');
                // Simulate emergency state
                document.body.style.animation = 'none';
                document.body.style.background = 'linear-gradient(135deg, #331a1a 0%, #1a0505 100%)';
                setTimeout(() => {
                    document.body.style.background = '';
                    showNotification('Emergency alert cleared', 'success');
                }, 10000);
            }
        }

        // System control functions
        function restartAllUnits() {
            if (confirm('Restart all surveillance units? This will cause temporary service interruption.')) {
                showNotification('Restarting all units... This may take 2-3 minutes', 'info');
                // Simulate restart process
                setTimeout(() => {
                    showNotification('All units successfully restarted', 'success');
                }, 3000);
            }
        }

        function runDiagnostics() {
            showNotification('Running system diagnostics...', 'info');
            let progress = 0;
            const diagnosticInterval = setInterval(() => {
                progress += 20;
                showNotification(`Diagnostics ${progress}% complete`, 'info');
                if (progress >= 100) {
                    clearInterval(diagnosticInterval);
                    showNotification('Diagnostics complete - All systems nominal', 'success');
                }
            }, 1000);
        }

        function updateFirmware() {
            if (confirm('Update firmware on all units? This process may take 10-15 minutes.')) {
                showNotification('Firmware update initiated...', 'info');
                setTimeout(() => {
                    showNotification('Firmware update completed successfully', 'success');
                }, 5000);
            }
        }

        function emergencyShutdown() {
            if (confirm('EMERGENCY SHUTDOWN: This will disable all surveillance units immediately. Continue?')) {
                if (confirm('Are you absolutely sure? This action cannot be undone remotely.')) {
                    showNotification('EMERGENCY SHUTDOWN INITIATED', 'error');
                    setTimeout(() => {
                        alert('All systems have been shut down. Manual restart required at each unit.');
                    }, 2000);
                }
            }
        }

        // Settings functions
        function toggleSetting(toggle) {
            toggle.classList.toggle('active');
            const setting = toggle.parentElement.textContent.trim();
            const isEnabled = toggle.classList.contains('active');
            showNotification(`${setting} ${isEnabled ? 'enabled' : 'disabled'}`, 'info');
        }

        function saveSettings() {
            showNotification('Configuration saved successfully', 'success');
            // Simulate saving to server
            setTimeout(() => {
                showNotification('Settings applied to all units', 'info');
            }, 2000);
        }

        function resetSettings() {
            if (confirm('Reset all settings to factory defaults?')) {
                showNotification('Settings reset to defaults', 'info');
                // Reset all toggles and form values
                document.querySelectorAll('.toggle-switch.active').forEach(toggle => {
                    if (toggle.parentElement.textContent.includes('Two-Factor') || 
                        toggle.parentElement.textContent.includes('SSL/TLS') ||
                        toggle.parentElement.textContent.includes('Email') ||
                        toggle.parentElement.textContent.includes('Night Vision') ||
                        toggle.parentElement.textContent.includes('Auto-Recording') ||
                        toggle.parentElement.textContent.includes('Auto Sleep')) {
                        // Keep these enabled by default
                        return;
                    }
                    toggle.classList.remove('active');
                });
            }
        }

        // Filter functions
        function filterAlerts(type) {
            const allAlerts = document.querySelectorAll('#all-alerts .alert-item');
            
            allAlerts.forEach(alert => {
                const severity = alert.querySelector('.alert-severity').textContent.toLowerCase();
                const time = alert.querySelector('.alert-time').textContent;
                const isToday = time.includes('minutes ago') || time.includes('hour ago') || time.includes('AM') || time.includes('PM');
                
                let show = false;
                switch(type) {
                    case 'all':
                        show = true;
                        break;
                    case 'high':
                        show = severity.includes('high') || severity.includes('critical');
                        break;
                    case 'today':
                        show = isToday;
                        break;
                }
                
                alert.style.display = show ? 'flex' : 'none';
            });
            
            // Update button states
            event.target.parentElement.querySelectorAll('.btn').forEach(btn => {
                btn.classList.remove('btn-primary');
                btn.classList.add('btn-secondary');
            });
            event.target.classList.remove('btn-secondary');
            event.target.classList.add('btn-primary');
        }

        // Utility functions
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `alert alert-${type}`;
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                z-index: 2000;
                padding: 15px 20px;
                background: ${type === 'success' ? 'var(--success-color)' : 
                            type === 'error' ? 'var(--warning-color)' : 
                            type === 'info' ? 'var(--info-color)' : 'var(--primary-color)'};
                color: white;
                border-radius: 8px;
                box-shadow: 0 4px 20px rgba(0,0,0,0.3);
                animation: slideIn 0.3s ease;
                min-width: 300px;
                max-width: 400px;
            `;
            
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 
                                   type === 'error' ? 'exclamation-triangle' : 
                                   type === 'info' ? 'info-circle' : 'bell'}"></i>
                <span style="margin-left: 10px;">${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            // Add slide-in animation
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
            `;
            document.head.appendChild(style);
            
            // Remove after 5 seconds
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.style.animation = 'slideIn 0.3s ease reverse';
                    setTimeout(() => {
                        notification.parentNode.removeChild(notification);
                    }, 300);
                }
            }, 5000);
        }

        function updateMapMarkers() {
            // Update map markers with current system status
            if (surveillanceMap) {
                // Implementation would update marker colors based on current status
                console.log('Updating map markers...');
            }
        }

        function logout() {
            if (confirm('Are you sure you want to logout from the command center?')) {
                showNotification('Logging out...', 'info');
                setTimeout(() => {
                    alert('You have been logged out. Please login again to access the system.');
                    // In a real application, redirect to login page
                }, 2000);
            }
        }

        // Mobile menu toggle
        function toggleMobileMenu() {
            const sidebar = document.querySelector('.sidebar');
            sidebar.classList.toggle('open');
        }

        // Add mobile menu button for small screens
        if (window.innerWidth <= 768) {
            const mobileMenuBtn = document.createElement('button');
            mobileMenuBtn.innerHTML = '<i class="fas fa-bars"></i>';
            mobileMenuBtn.style.cssText = `
                position: fixed;
                top: 20px;
                left: 20px;
                z-index: 1001;
                background: var(--primary-color);
                border: 1px solid var(--accent-color);
                color: var(--accent-color);
                padding: 10px;
                border-radius: 5px;
                cursor: pointer;
            `;
            mobileMenuBtn.onclick = toggleMobileMenu;
            document.body.appendChild(mobileMenuBtn);
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case '1':
                        showPage('dashboard');
                        e.preventDefault();
                        break;
                    case '2':
                        showPage('live-feeds');
                        e.preventDefault();
                        break;
                    case '3':
                        showPage('map-view');
                        e.preventDefault();
                        break;
                    case '4':
                        showPage('alerts');
                        e.preventDefault();
                        break;
                    case 'r':
                        startRecordingAll();
                        e.preventDefault();
                        break;
                    case 's':
                        takeSnapshots();
                        e.preventDefault();
                        break;
                }
            }
            
            // Emergency shortcut
            if (e.key === 'F12' && e.shiftKey) {
                emergencyAlert();
                e.preventDefault();
            }
        });

        // Auto-refresh page data
        setInterval(() => {
            if (document.visibilityState === 'visible') {
                // Only update when page is visible to save resources
                console.log('Refreshing surveillance data...');
            }
        }, 30000); // Every 30 seconds

        // Connection status monitoring
        window.addEventListener('online', () => {
            showNotification('Connection restored', 'success');
            document.querySelector('.status-indicator span').textContent = 'System Online';
        });

        window.addEventListener('offline', () => {
            showNotification('Connection lost - Operating in offline mode', 'error');
            document.querySelector('.status-indicator span').textContent = 'System Offline';
        });

        console.log('Defense Surveillance System initialized successfully');
        console.log('Available keyboard shortcuts:');
        console.log('- Ctrl+1: Dashboard');
        console.log('- Ctrl+2: Live Feeds');
        console.log('- Ctrl+3: Map View');
        console.log('- Ctrl+4: Alerts');
        console.log('- Ctrl+R: Record All');
        console.log('- Ctrl+S: Snapshot All');
        console.log('- Shift+F12: Emergency Alert');
    </script>
</body>

</html>
